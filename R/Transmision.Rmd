---
title: "Untitled"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r paquetes}
paquetes<-c("classInt","corrplot","d3heatmap","DT","factoextra","FactoMineR","foreign","ggplot2","gridExtra","heatmaply","Hmisc","knitr","leaflet","maps","maptools","NbClust","openxlsx","pander","plotly","raster","RColorBrewer","reshape2","rgdal","rgeos","RPostgreSQL","scales","sf","spatstat","spdep","VIM","viridis")
# vector con los paquetes no instalados
instalaciones<-paquetes[!paquetes %in% installed.packages()]
# iteraciÃ³n para descargar los paquetes sin instalar
for(libs in instalaciones) install.packages(libs)
# carga de paquetes
sapply(paquetes,require,character=TRUE)
```


```{r info}
inicial<-read.csv(choose.files(default = "E:/OTROS/AACONAL/Reporte/20180524_Reporte/.csv",caption = "TRANSMISION en csv"),header=TRUE,sep=";",stringsAsFactors=FALSE)

grafica<-read.csv(choose.files(default = "E:/OTROS/AACONAL/Reporte/20180524_Reporte/.csv",caption = "Fecha IET en csv"),header=TRUE,sep=";",stringsAsFactors=FALSE)

DPTOS<-readOGR(dsn="C:/Geo",layer="Dptos_lin",stringsAsFactors=FALSE,use_iconv=TRUE,encoding="UTF-8")
str(DPTOS@data)

MPIOS<-readOGR(dsn="C:/Geo",layer="Transmision",stringsAsFactors=FALSE,use_iconv=TRUE,encoding="UTF-8")

Trans<-MPIOS
```


```{r calculos}
Trans@data<-data.frame(as(Trans,"data.frame"),inicial[match(Trans@data[,"div_int"],inicial[,"ID_MPIO"]),])
Trans$Porcentaje <- (Trans$TRANSMITIDAS.A / Trans$NOTIFICADAS.B ) * 100.00

```




```{r}

```


```{r cars}
myurl <- "https://gist.githubusercontent.com/john-guerra/43c7656821069d00dcbc/raw/be6a6e239cd5b5b803c6e7c2ec405b793a9064dd/Colombia.geo.json"
geo <- readLines(myurl)
geo <- paste0(geo, collapse = "")
sf <- geojson_sf(geo)

system.time({mpios <- geojson_sf(geo)})


```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
