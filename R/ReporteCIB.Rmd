---
title: "Censo Inmobiliario de Bogotá - 2019"
output: 
  pdf_document:
    latex_engine: xelatex
    fig_caption: yes
    keep_tex: yes
mainfont: LiberationSans
sansfont: LiberationSans
monofont: LiberationSans
fontsize: 12pt
geometry: margin=2cm
classoption: landscape
header-includes:
  - \usepackage{pdfpages}
  - \usepackage{float}
---
```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.pos = 'H')
```

```{r, echo=FALSE}
rm(list=ls())

for (p in c("classInt","corrplot","flexdashboard","d3heatmap","DT","factoextra","FactoMineR","foreign","ggplot2","gridExtra","heatmaply","Hmisc","knitr","leaflet","maps","maptools","NbClust","openxlsx","pander","plotly","raster","RColorBrewer","reshape2","rgdal","rgeos","RPostgreSQL","scales","sf","spatstat","spdep","stringr","VIM","viridis","pander","data.table","bit64","staplr","gdata","tmap","grid","png")) {
  if (!requireNamespace(p, quietly = TRUE))
    install.packages(p)
  suppressMessages(library(p, character.only = TRUE))
} 

```

## Resultados en Bogotá

En el desarrollo del proceso de actualización del Censo Inmobiliario de Bogotá para la vigencia 2019 se contabilizaron 2.643.666 predios, el área construida alcanzó los 287,3 millones de metros cuadrados y la ciudad pasó de tener un valor catastral total de \$590,6 billones de pesos en 2018 a \$623,8 billones en 2019. Estas cifras evidencian un crecimiento inmobiliario de la ciudad del 2,18% del total de predios, un incremento del 1,44% del total de área construida y un crecimiento del 5,62% en valor catastral total. La siguiente gráfica resumen por Localidad de los datos del CIB 2018.

![Cambios en el número de predios y área construida](E:/Reporte/TablaPredios.png){height=4cm}

## Resultados en el sector

\includepdf[pages=-,nup=5,pagecommand={}]{INFOSECTOR.pdf}

```{r Cargue, include= FALSE}
Predios<-read.table("CoordsPredios2019_Pruebas.txt",sep=";",dec = ",",header=TRUE,stringsAsFactors = FALSE)
Predios$BARMANPRED<-paste0(str_pad(Predios$CODIGO_BAR, 6, pad = "0"),str_pad(Predios$CODIGO_MAN, 3, pad = "0"),str_pad(Predios$CODIGO_PRE, 3, pad = "0"))
BARRIO<-"001101002"
PBarrios<-Predios[startsWith(Predios$BARMANPRED,BARRIO),]
PREDIOS<-st_as_sf(PBarrios,coords = c('XCoord', 'YCoord'),crs = "+init=epsg:3116")
```

```{r CargueDatosMapa, echo=FALSE,message=FALSE,warning=FALSE}
Predios<-read.table("CoordsPredios2019_Pruebas.txt",sep=";",dec = ",",header=TRUE,stringsAsFactors = FALSE)
Predios$BARMANPRED<-paste0(str_pad(Predios$CODIGO_BAR, 6, pad = "0"),str_pad(Predios$CODIGO_MAN, 3, pad = "0"),str_pad(Predios$CODIGO_PRE, 3, pad = "0"))
BARRIO<-"001101002"
PBarrios<-Predios[startsWith(Predios$BARMANPRED,BARRIO),]
PREDIOS<-st_as_sf(PBarrios,coords = c('XCoord', 'YCoord'),crs = "+init=epsg:3116")
#st_write(PREDIOS, "nc.shp",delete_layer=TRUE)
``` 


```{r Mapa, echo=FALSE,message=FALSE,warning=FALSE}
options(scipen = 999)
plot(PREDIOS[,c("VALOR_AVAL","VAR_AVALUO","AREA_CONST")],pch = 19,breaks = "jenks",nbreaks=5,key.pos = 1)
#plot(st_geometry(st_centroid(nc)), pch = 3, col = 'red', add = TRUE)

#ggplot(data = PREDIOS) +
#    geom_sf() +
#    geom_sf(data = PREDIOS, size = 4, shape = 23, fill = "darkred")

#plot(PREDIOS)
#map <- leaflet(data=PREDIOS) %>%
#        addTiles() %>% setView(-74.0761028,4.5980772,zoom=8)%>%
#        addMarkers(clusterOptions = markerClusterOptions())
  
#map
``` 

## Resultados del Predio

El predio presenta las siguientes características para la vigencia 2019:

```{r kable, echo=FALSE, message=FALSE, results='asis'}
PRED<-PREDIOS[PREDIOS$BARMANPRED=='001101002001',]

kable(t(PRED[,c("BARMANPRED","AREA_TERRE","AREA_CONST","VALOR_AVAL","AVALUO_TOT","VAR_AVALUO","CODIGO_EST","GRUPO_ECON")]), digits=2,col.names = c("Valor"))
```
